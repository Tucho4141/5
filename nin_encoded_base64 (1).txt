local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local FloatingButton = loadstring(game:HttpGet("https://raw.githubusercontent.com/Raelhub/Rael-hub-function/refs/heads/main/ButtonFloating/FloatingButton.lua"))()
local RaelHubMemeSea = loadstring(game:HttpGet(('https://raw.githubusercontent.com/Laelmano24/Meme-Sea-Script/refs/heads/main/Modules.lua')))()
local GetListMonsters = loadstring(game:HttpGet("https://raw.githubusercontent.com/Laelmano24/Meme-Sea/refs/heads/main/MemeSea%20Monsters%20List.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()


local Window = Fluent:CreateWindow({
  Title = "Animow Hub | Meme Sea",
  SubTitle = "",
  TabWidth = 160,
  Size = UDim2.fromOffset(500, 320),
  Acrylic = true,
  Theme = "Darker",
  MinimizeKey = Enum.KeyCode.LeftControl
})

local Tabs = {
  Main = Window:AddTab({ Title = "Farming", Icon = "" }),
  item = Window:AddTab({ Title = "item", Icon = "" }),
  F = Window:AddTab({ Title = "Fruit", Icon = "" }),
  Vs = Window:AddTab({ Title = "Visual", Icon = "" }),
  Settings = Window:AddTab({ Title = "Settings", Icon = "settings" })
}

Tabs.Main:AddSection("Setting")

Tabs.Main:AddDropdown("Fighting style", {
  Title = "Fighting style",
  Values = {"Melee", "Weapons"},
  Multi = false,
  Default = "Melee",
  Callback = function(Value)
    
    getgenv().EquipStyle = Value
    
  end
})

Tabs.Main:AddSlider("Player height", {
  Title = "Distance Farm",
  Description = "",
  Default = 7,
  Min = 5,
  Max = 15,
  Rounding = 10,
  Callback = function(Value)
    getgenv().HeightPlayer = Value
  end
})

Tabs.Main:AddToggle("Auto click", {
  Title = "Auto click", 
  Default = false,
  Callback= function(Value)
    
    RaelHubMemeSea.AutoClicker(Value)
    
  end
})

Tabs.Main:AddToggle("Auto click", {
  Title = "Enabel Quest", 
  Default = true,
  Callback= function(Value)
    
      RaelHubMemeSea.GetLevelAndQuest(Value)
    
  end
})

Tabs.Main:AddSection("Farm")

local Autofarmtoggle = Tabs.Main:AddToggle("Auto farm", {
  Title = "Farm Level", 
  Default = false,
  Callback= function(Value)
    RaelHubMemeSea.AutoFarm(Value)
    
  end
})


local ListMonsterDropDown

Tabs.Main:AddSection("Monters")

Tabs.Main:AddDropdown("List monster", {
  Title = "Slect Monter",
  Values = GetListMonsters,
  Multi = false,
  Default = "...",
  Callback = function(Value)
    
    ListMonsterDropDown = Value
    
  end
})

Tabs.Main:AddToggle("Auto farm monster selected", {
  Title = "Auto farm monster selected", 
  Default = false,
  Callback= function(Value)
    
    if Value then
      Autofarmtoggle:SetValue(false)
    end
    RaelHubMemeSea.AutoFarmMonsterSelected(ListMonsterDropDown, Value)
    
  end
})

local ListBossDropDown

Tabs.Main:AddSection("Boss")

Tabs.Main:AddDropdown("List Boss", {
  Title = "Slect Boss",
  Values = {"Giant Pumpkin", "Evil Noob", "Lord Sus"},
  Multi = false,
  Default = "...",
  Callback = function(Value)
    
    ListBossDropDown = Value
    
  end
})

Tabs.Main:AddToggle("Auto farm boss", {
  Title = "Auto farm boss", 
  Default = false,
  Callback= function(Value)
    
    RaelHubMemeSea.AutoFarmBoss(ListBossDropDown, Value)
    
  end
})

Tabs.Main:AddSection("Other")

Tabs.Main:AddToggle("Auto farm boss", {
  Title = "Farm Raid", 
  Default = false,
  Callback= function(Value)
    
    RaelHubMemeSea.RaelHubAutoRaid(Value)
    
  end
})

Tabs.Main:AddToggle("Auto farm boss", {
  Title = "Farm Sea", 
  Default = false,
  Callback= function(Value)
    
    RaelHubMemeSea.AutoMemeBeast(Value, callback, callback2)
    
  end
})

--//item\\--
Tabs.item:AddToggle("Auto farm boss", {
  Title = "Auto Click Popcat", 
  Default = false,
  Callback= function(Value)
    
    RaelHubMemeSea.AutoClickCat(Value)
    
  end
})

Tabs.item:AddToggle("Auto farm boss", {
  Title = "Auto Sword Flopa", 
  Default = false,
  Callback= function(Value)
  
    RaelHubMemeSea.AutoClickFloppa(Value)

  end
})

Tabs.item:AddSection("Other")

Tabs.item:AddToggle("Auto farm boss", {
  Title = "Auto Roll Aura", 
  Default = false,
  Callback= function(Value)
    
    RaelHubMemeSea.AutoRollAura(Value)

  end
})

--//Fruit\\--

Tabs.F:AddToggle("Auto farm boss", {
  Title = "Store Fruit", 
  Default = true,
  Callback= function(value)
    
    RaelHubMemeSea.AutoEquipFruitStone(value)

  end
})

local Fruit = Tabs.F:AddDropdown("DropdownFarm", {
    Title = "Slect Roll Meme",
    Values = {"Gems", "Beli"},
    Multi = false,
})

Fruit:SetValue("...")
Fruit:OnChanged(function(Value)
_G.Roll = Value
end)

Tabs.F:AddToggle("Auto farm boss", {
  Title = "Random Fruit", 
  Default = true,
  Callback= function(value)
    if _G.Roll == "Gems" then
    RaelHubMemeSea.AutoRollFruitGem(value)
    elseif _G.Roll == "Beli" then
    RaelHubMemeSea.AutoRollFruitMoney(value)
    end
  end
})


InterfaceManager:SetLibrary(Fluent)
InterfaceManager:BuildInterfaceSection(Tabs.Settings)

Window:SelectTab(1)